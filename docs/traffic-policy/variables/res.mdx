## Response Variables

The following variables are available under the `res` namespace:

| Name                                                        | Type                     | Description                                                                                                              |
| ----------------------------------------------------------- | ------------------------ | ------------------------------------------------------------------------------------------------------------------------ |
| [`res.content_encoding`](#rescontent_encoding)              | list[string]             | The encoding set in the Content-Encoding header for this response as a list.                                             |
| [`res.content_length`](#rescontent_length)                  | int64                    | The length of the content associated with the response.                                                                  |
| [`res.content_type`](#rescontent_type)                      | string                   | The media type set in the Content-Type header for this response as a string.                                             |
| [`res.content_type.parameters`](#rescontent_typeparameters) | map[string]string        | The parameters set in the Content-Type header for this response as a key value map.                                      |
| [`res.content_type.raw`](#rescontent_typeraw)               | string                   | The Content-Type header for this response as a string.                                                                   |
| [`res.cookies`](#rescookies)                                | map[string]\*http.Cookie | The key value map of HTTP cookie objects provided in the response.                                                       |
| [`res.headers`](#resheaders)                                | map[string][]string      | The response headers parsed as a map of lower-case names to values.                                                      |
| [`res.location`](#reslocation)                              | string                   | The location header value of this response.                                                                              |
| [`res.status_code`](#resstatus_code)                        | int32                    | The status code of this response.                                                                                        |
| [`res.trailers`](#restrailers)                              | map[string][]string      | The response trailers parsed as a map of lower-case names to values.                                                     |
| [`res.ts.body_sent`](#restsbody_sent)                       | timestamp                | The timestamp when ngrok sent the body of the response. This may not be present if the response does not contain a body. |
| [`res.ts.header_sent`](#restsheader_sent)                   | timestamp                | The timestamp when ngrok sent the header of the response.                                                                |

### `res.content_encoding`

The encoding set in the Content-Encoding header for this response as a list.

<ConfigExample
	config={{
		expressions: ["res.content_encoding[0] == 'br'"],
	}}
/>

### `res.content_length`

The length of the content associated with the response.

<ConfigExample
	config={{
		expressions: ["res.content_length != 0"],
	}}
/>

### `res.content_type`

The media type set in the Content-Type header for this response as a string.

<ConfigExample
	config={{
		expressions: ["res.content_type == 'application/json'"],
	}}
/>

### `res.content_type.parameters`

The parameters set in the Content-Type header for this response as a key value map.

<ConfigExample
	config={{
		expressions: ["res.content_type.parameters['charset'] == 'utf-8'"],
	}}
/>

### `res.content_type.raw`

The Content-Type header for this response as a string.

<ConfigExample
	config={{
		expressions: ["res.content_type.raw == 'application/json; charset=utf-8'"],
	}}
/>

### `res.cookies`

The key value map of HTTP cookie objects provided in the response.

<ConfigExample
	config={{
		expressions: ["size(req.cookies) > 0"],
	}}
/>

### `res.headers`

The headers of the response parsed as key maps to a list of values. Header keys must be written in canonical format.

<ConfigExample
	config={{
		expressions: ["'Fizz' in res.headers['baz']"],
	}}
/>

### `res.location`

The location header value of the response.

<ConfigExample
	config={{
		expressions: ["res.location == '/index.html'"],
	}}
/>

### `res.status_code`

The status code of this response.

<ConfigExample
	config={{
		expressions: ["res.status_code >= 300"],
	}}
/>

### `res.trailers`

The trailers of the response parsed as key maps to a list of values. Trailer keys must be written in canonical format.

<ConfigExample
	config={{
		expressions: ["'fizz' in res.trailers['baz']"],
	}}
/>

### `res.ts.body_sent`

The timestamp when ngrok sent the body of the response. This may not be present if the response does not contain a body.

<ConfigExample
	config={{
		expressions: ["res.ts.body_sent > timestamp('2023-12-31')"],
	}}
/>

### `res.ts.header_sent`

The timestamp when ngrok sent the header of the request.

<ConfigExample
	config={{
		expressions: ["res.ts.header_sent > timestamp('2023-12-31')"],
	}}
/>

## Time variables

The following variables are available under the `time` namespace:

| Name                   | Type   | Description                             |
| ---------------------- | ------ | --------------------------------------- |
| [`time.now`](#timenow) | string | The current UTC time in RFC3339 format. |

### `time.now`

The current UTC time in RFC3339 format.

<ConfigExample
	config={{
		expressions: ["conn.ts.end < timestamp(time.now)"],
	}}
/>
